<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloudflare Pages Diagnostic</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 { color: #d4af37; }
        .error { color: #d00; background: #ffe6e6; padding: 15px; border-radius: 4px; margin: 10px 0; }
        .success { color: #0a0; background: #e6ffe6; padding: 15px; border-radius: 4px; margin: 10px 0; }
        .info { color: #006; background: #e6f3ff; padding: 15px; border-radius: 4px; margin: 10px 0; }
        code { background: #f0f0f0; padding: 2px 6px; border-radius: 3px; font-family: monospace; }
        .step { margin: 20px 0; padding: 15px; background: #f9f9f9; border-left: 4px solid #d4af37; }
        ol { line-height: 1.8; }
    </style>
</head>
<body>
    <div class="card">
        <h1>üîç Cloudflare Pages Diagnostic</h1>
        
        <div id="diagnosis"></div>
        
        <div class="step">
            <h2>üìã Current Status</h2>
            <div id="status"></div>
        </div>
        
        <div class="step">
            <h2>üîß How to Fix</h2>
            <ol>
                <li>Go to <a href="https://dash.cloudflare.com" target="_blank">Cloudflare Dashboard</a></li>
                <li>Click <strong>Pages</strong> ‚Üí Your project</li>
                <li>Click <strong>Settings</strong> ‚Üí <strong>Builds & deployments</strong></li>
                <li>Find <strong>Build configuration</strong></li>
                <li>Set <strong>Build output directory</strong> to: <code>dist</code></li>
                <li>Set <strong>Build command</strong> to: <code>npm run build</code></li>
                <li>Click <strong>Save</strong></li>
                <li>Go to <strong>Deployments</strong> tab</li>
                <li>Click <strong>Clear build cache</strong></li>
                <li>Click the <strong>three dots</strong> (‚ãØ) on latest deployment</li>
                <li>Click <strong>Retry deployment</strong></li>
                <li>Wait 2-5 minutes for deployment to complete</li>
            </ol>
        </div>
    </div>
    
    <script>
        const scripts = Array.from(document.querySelectorAll('script[src]'));
        const hasSourceScript = scripts.some(s => s.src.includes('/src/main.jsx'));
        const hasAssetsScript = scripts.some(s => s.src.includes('/assets/'));
        
        let diagnosis = '';
        let status = '';
        
        if (hasSourceScript) {
            diagnosis = '<div class="error"><strong>‚ùå PROBLEM DETECTED:</strong><br>Your site is loading <code>/src/main.jsx</code> which means Cloudflare Pages is serving SOURCE files instead of BUILT files.<br><br><strong>This must be fixed in Cloudflare Dashboard settings!</strong></div>';
            status = '<div class="error">‚ùå Build output directory is NOT set to <code>dist</code><br>‚ùå Cloudflare is serving source files<br>‚ùå Build may not be running</div>';
        } else if (hasAssetsScript) {
            diagnosis = '<div class="success"><strong>‚úÖ GOOD:</strong><br>Your site is loading from <code>/assets/</code> which is correct!</div>';
            status = '<div class="success">‚úÖ Build output directory is set correctly<br>‚úÖ Cloudflare is serving built files<br>‚úÖ Everything is working!</div>';
        } else {
            diagnosis = '<div class="info"><strong>‚ÑπÔ∏è INFO:</strong><br>Could not detect script loading method. Check browser console (F12) for details.</div>';
            status = '<div class="info">Unable to determine status. Please check Cloudflare dashboard settings.</div>';
        }
        
        document.getElementById('diagnosis').innerHTML = diagnosis;
        document.getElementById('status').innerHTML = status;
        
        // Also log to console
        console.log('=== Cloudflare Pages Diagnostic ===');
        console.log('Scripts found:', scripts.map(s => s.src));
        console.log('Has /src/main.jsx:', hasSourceScript);
        console.log('Has /assets/ script:', hasAssetsScript);
    </script>
</body>
</html>

